<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/core_backend/src/test/resources/db/test-migration/V1__Create_immunization_schema.sql">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/core_backend/src/test/resources/db/test-migration/V1__Create_immunization_schema.sql" />
              <option name="originalContent" value="-- H2-compatible version of V1__Create_immunization_schema.sql&#10;&#10;-- Schema für H2 anlegen&#10;CREATE SCHEMA IF NOT EXISTS SPRING_BOOSTERS;&#10;SET SCHEMA SPRING_BOOSTERS;&#10;&#10;-- Create users table&#10;CREATE TABLE IF NOT EXISTS users (&#10;                                     id UUID DEFAULT RANDOM_UUID() NOT NULL,&#10;    username VARCHAR(255) UNIQUE NOT NULL,&#10;    email VARCHAR(255) UNIQUE NOT NULL,&#10;    password_hash VARCHAR(255) NOT NULL,&#10;    first_name VARCHAR(255),&#10;    last_name VARCHAR(255),&#10;    birth_date DATE NOT NULL,&#10;    role VARCHAR(50) DEFAULT 'USER',&#10;    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    PRIMARY KEY (id)&#10;    );&#10;&#10;-- Create vaccine_type table&#10;CREATE TABLE IF NOT EXISTS vaccine_type (&#10;                                            id UUID DEFAULT RANDOM_UUID() NOT NULL,&#10;    name VARCHAR(255) NOT NULL,&#10;    code VARCHAR(100),&#10;    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    PRIMARY KEY (id)&#10;    );&#10;&#10;-- Create active_substance table&#10;CREATE TABLE IF NOT EXISTS active_substance (&#10;                                                id UUID DEFAULT RANDOM_UUID() NOT NULL,&#10;    name VARCHAR(255) NOT NULL,&#10;    synonyms TEXT ARRAY, -- stored as text array for H2 to match TEXT[] semantics&#10;    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    PRIMARY KEY (id)&#10;    );&#10;&#10;-- Create age_category table&#10;CREATE TABLE IF NOT EXISTS age_category (&#10;                                            id UUID DEFAULT RANDOM_UUID() NOT NULL,&#10;    name VARCHAR(255) NOT NULL,&#10;    age_min_days INT NOT NULL,&#10;    age_max_days INT, -- NULL means open-ended&#10;    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    PRIMARY KEY (id)&#10;    );&#10;&#10;-- Create vaccine_type_active_substance junction table&#10;CREATE TABLE IF NOT EXISTS vaccine_type_active_substance (&#10;                                                             vaccine_type_id UUID NOT NULL,&#10;                                                             active_substance_id UUID NOT NULL,&#10;                                                             qualitative_amount VARCHAR(255),&#10;    PRIMARY KEY (vaccine_type_id, active_substance_id),&#10;    FOREIGN KEY (vaccine_type_id) REFERENCES vaccine_type(id) ON DELETE CASCADE,&#10;    FOREIGN KEY (active_substance_id) REFERENCES active_substance(id) ON DELETE CASCADE&#10;    );&#10;&#10;-- Create immunization_plan table&#10;CREATE TABLE IF NOT EXISTS immunization_plan (&#10;                                                 id UUID DEFAULT RANDOM_UUID() NOT NULL,&#10;    name VARCHAR(255) NOT NULL,&#10;    vaccine_type_id UUID NOT NULL,&#10;    age_category_id UUID NOT NULL,&#10;    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    PRIMARY KEY (id),&#10;    FOREIGN KEY (vaccine_type_id) REFERENCES vaccine_type(id) ON DELETE RESTRICT,&#10;    FOREIGN KEY (age_category_id) REFERENCES age_category(id) ON DELETE RESTRICT&#10;    );&#10;&#10;-- Create immunization_plan_series table&#10;CREATE TABLE IF NOT EXISTS immunization_plan_series (&#10;                                                        id UUID DEFAULT RANDOM_UUID() NOT NULL,&#10;    immunization_plan_id UUID NOT NULL,&#10;    series_name VARCHAR(255) NOT NULL,&#10;    required_doses INT NOT NULL,&#10;    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    PRIMARY KEY (id),&#10;    FOREIGN KEY (immunization_plan_id) REFERENCES immunization_plan(id) ON DELETE CASCADE&#10;    );&#10;&#10;-- Create follow_up_rule table&#10;CREATE TABLE IF NOT EXISTS follow_up_rule (&#10;                                              id UUID DEFAULT RANDOM_UUID() NOT NULL,&#10;    from_plan_id UUID,&#10;    to_plan_id UUID,&#10;    required_series_id UUID,&#10;    min_completed_doses INT NOT NULL,&#10;    target_min_age_days INT,&#10;    target_max_age_days INT,&#10;    min_interval_days_since_last INT,&#10;    preferred_age_days INT,&#10;    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    PRIMARY KEY (id),&#10;    FOREIGN KEY (from_plan_id) REFERENCES immunization_plan(id) ON DELETE CASCADE,&#10;    FOREIGN KEY (to_plan_id) REFERENCES immunization_plan(id) ON DELETE CASCADE,&#10;    FOREIGN KEY (required_series_id) REFERENCES immunization_plan_series(id) ON DELETE CASCADE&#10;    );&#10;&#10;-- Create immunization_record table&#10;CREATE TABLE IF NOT EXISTS immunization_record (&#10;                                                   id UUID DEFAULT RANDOM_UUID() NOT NULL,&#10;    user_id UUID NOT NULL,&#10;    vaccine_type_id UUID NOT NULL,&#10;    immunization_plan_id UUID NOT NULL,&#10;    administered_on DATE NOT NULL,&#10;    dose_order_claimed INT,&#10;    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    PRIMARY KEY (id),&#10;    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,&#10;    FOREIGN KEY (vaccine_type_id) REFERENCES vaccine_type(id) ON DELETE RESTRICT,&#10;    FOREIGN KEY (immunization_plan_id) REFERENCES immunization_plan(id) ON DELETE RESTRICT&#10;    );&#10;&#10;-- Create indexes for better performance&#10;CREATE INDEX IF NOT EXISTS idx_users_username ON users(username);&#10;CREATE INDEX IF NOT EXISTS idx_vaccine_type_name ON vaccine_type(name);&#10;CREATE INDEX IF NOT EXISTS idx_active_substance_name ON active_substance(name);&#10;CREATE INDEX IF NOT EXISTS idx_age_category_age_range ON age_category(age_min_days, age_max_days);&#10;CREATE INDEX IF NOT EXISTS idx_immunization_plan_vaccine_type ON immunization_plan(vaccine_type_id);&#10;CREATE INDEX IF NOT EXISTS idx_immunization_plan_age_category ON immunization_plan(age_category_id);&#10;CREATE INDEX IF NOT EXISTS idx_immunization_record_user ON immunization_record(user_id);&#10;CREATE INDEX IF NOT EXISTS idx_immunization_record_vaccine_type ON immunization_record(vaccine_type_id);&#10;CREATE INDEX IF NOT EXISTS idx_immunization_record_plan ON immunization_record(immunization_plan_id);&#10;CREATE INDEX IF NOT EXISTS idx_immunization_record_administered_on ON immunization_record(administered_on);" />
              <option name="updatedContent" value="-- H2-compatible version of V1__Create_immunization_schema.sql&#10;&#10;-- Schema für H2 anlegen&#10;CREATE SCHEMA IF NOT EXISTS SPRING_BOOSTERS;&#10;SET SCHEMA SPRING_BOOSTERS;&#10;&#10;-- Create users table&#10;CREATE TABLE IF NOT EXISTS users (&#10;                                     id UUID DEFAULT RANDOM_UUID() NOT NULL,&#10;    username VARCHAR(255) UNIQUE NOT NULL,&#10;    email VARCHAR(255) UNIQUE NOT NULL,&#10;    password_hash VARCHAR(255) NOT NULL,&#10;    first_name VARCHAR(255),&#10;    last_name VARCHAR(255),&#10;    birth_date DATE NOT NULL,&#10;    role VARCHAR(50) DEFAULT 'USER',&#10;    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    PRIMARY KEY (id)&#10;    );&#10;&#10;-- Create vaccine_type table&#10;CREATE TABLE IF NOT EXISTS vaccine_type (&#10;                                            id UUID DEFAULT RANDOM_UUID() NOT NULL,&#10;    name VARCHAR(255) NOT NULL,&#10;    code VARCHAR(100),&#10;    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    PRIMARY KEY (id)&#10;    );&#10;&#10;-- Create active_substance table&#10;CREATE TABLE IF NOT EXISTS active_substance (&#10;                                                id UUID DEFAULT RANDOM_UUID() NOT NULL,&#10;    name VARCHAR(255) NOT NULL,&#10;    synonyms TEXT ARRAY, -- stored as text array for H2 to match TEXT[] semantics&#10;    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    PRIMARY KEY (id)&#10;    );&#10;&#10;-- Create age_category table&#10;CREATE TABLE IF NOT EXISTS age_category (&#10;                                            id UUID DEFAULT RANDOM_UUID() NOT NULL,&#10;    name VARCHAR(255) NOT NULL,&#10;    age_min_days INT NOT NULL,&#10;    age_max_days INT, -- NULL means open-ended&#10;    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    PRIMARY KEY (id)&#10;    );&#10;&#10;-- Create vaccine_type_active_substance junction table&#10;CREATE TABLE IF NOT EXISTS vaccine_type_active_substance (&#10;                                                             vaccine_type_id UUID NOT NULL,&#10;                                                             active_substance_id UUID NOT NULL,&#10;                                                             qualitative_amount VARCHAR(255),&#10;    PRIMARY KEY (vaccine_type_id, active_substance_id),&#10;    FOREIGN KEY (vaccine_type_id) REFERENCES vaccine_type(id) ON DELETE CASCADE,&#10;    FOREIGN KEY (active_substance_id) REFERENCES active_substance(id) ON DELETE CASCADE&#10;    );&#10;&#10;-- Create immunization_plan table&#10;CREATE TABLE IF NOT EXISTS immunization_plan (&#10;                                                 id UUID DEFAULT RANDOM_UUID() NOT NULL,&#10;    name VARCHAR(255) NOT NULL,&#10;    vaccine_type_id UUID NOT NULL,&#10;    age_category_id UUID NOT NULL,&#10;    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    PRIMARY KEY (id),&#10;    FOREIGN KEY (vaccine_type_id) REFERENCES vaccine_type(id) ON DELETE RESTRICT,&#10;    FOREIGN KEY (age_category_id) REFERENCES age_category(id) ON DELETE RESTRICT&#10;    );&#10;&#10;-- Create immunization_plan_series table&#10;CREATE TABLE IF NOT EXISTS immunization_plan_series (&#10;                                                        id UUID DEFAULT RANDOM_UUID() NOT NULL,&#10;    immunization_plan_id UUID NOT NULL,&#10;    series_name VARCHAR(255) NOT NULL,&#10;    required_doses INT NOT NULL,&#10;    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    PRIMARY KEY (id),&#10;    FOREIGN KEY (immunization_plan_id) REFERENCES immunization_plan(id) ON DELETE CASCADE&#10;    );&#10;&#10;-- Create follow_up_rule table&#10;CREATE TABLE IF NOT EXISTS follow_up_rule (&#10;                                              id UUID DEFAULT RANDOM_UUID() NOT NULL,&#10;    from_plan_id UUID,&#10;    to_plan_id UUID,&#10;    required_series_id UUID,&#10;    min_completed_doses INT NOT NULL,&#10;    target_min_age_days INT,&#10;    target_max_age_days INT,&#10;    min_interval_days_since_last INT,&#10;    preferred_age_days INT,&#10;    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    PRIMARY KEY (id),&#10;    FOREIGN KEY (from_plan_id) REFERENCES immunization_plan(id) ON DELETE CASCADE,&#10;    FOREIGN KEY (to_plan_id) REFERENCES immunization_plan(id) ON DELETE CASCADE,&#10;    FOREIGN KEY (required_series_id) REFERENCES immunization_plan_series(id) ON DELETE CASCADE&#10;    );&#10;&#10;-- Create immunization_record table&#10;CREATE TABLE IF NOT EXISTS immunization_record (&#10;                                                   id UUID DEFAULT RANDOM_UUID() NOT NULL,&#10;    user_id UUID NOT NULL,&#10;    vaccine_type_id UUID NOT NULL,&#10;    immunization_plan_id UUID NOT NULL,&#10;    administered_on DATE NOT NULL,&#10;    dose_order_claimed INT,&#10;    created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,&#10;    PRIMARY KEY (id),&#10;    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,&#10;    FOREIGN KEY (vaccine_type_id) REFERENCES vaccine_type(id) ON DELETE RESTRICT,&#10;    FOREIGN KEY (immunization_plan_id) REFERENCES immunization_plan(id) ON DELETE RESTRICT&#10;    );&#10;&#10;-- Create indexes for better performance&#10;CREATE INDEX IF NOT EXISTS idx_users_username ON users(username);&#10;CREATE INDEX IF NOT EXISTS idx_vaccine_type_name ON vaccine_type(name);&#10;CREATE INDEX IF NOT EXISTS idx_active_substance_name ON active_substance(name);&#10;CREATE INDEX IF NOT EXISTS idx_age_category_age_range ON age_category(age_min_days, age_max_days);&#10;CREATE INDEX IF NOT EXISTS idx_immunization_plan_vaccine_type ON immunization_plan(vaccine_type_id);&#10;CREATE INDEX IF NOT EXISTS idx_immunization_plan_age_category ON immunization_plan(age_category_id);&#10;CREATE INDEX IF NOT EXISTS idx_immunization_record_user ON immunization_record(user_id);&#10;CREATE INDEX IF NOT EXISTS idx_immunization_record_vaccine_type ON immunization_record(vaccine_type_id);&#10;CREATE INDEX IF NOT EXISTS idx_immunization_record_plan ON immunization_record(immunization_plan_id);&#10;CREATE INDEX IF NOT EXISTS idx_immunization_record_administered_on ON immunization_record(administered_on);" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/core_backend/src/test/resources/db/test-migration/V2__Insert_master_data.sql">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/core_backend/src/test/resources/db/test-migration/V2__Insert_master_data.sql" />
              <option name="originalContent" value="-- H2-compatible version of V2__Insert_master_data.sql&#10;&#10;CREATE SCHEMA IF NOT EXISTS SPRING_BOOSTERS;&#10;SET SCHEMA SPRING_BOOSTERS;&#10;&#10;-- Insert default active substances&#10;INSERT INTO active_substance (id, name, synonyms) VALUES&#10;                                                      (RANDOM_UUID(), 'mRNA-1273', 'Moderna mRNA,Spikevax'),&#10;                                                      (RANDOM_UUID(), 'BNT162b2', 'Pfizer-BioNTech,Comirnaty'),&#10;                                                      (RANDOM_UUID(), 'ChAdOx1-S', 'AstraZeneca,Vaxzevria'),&#10;                                                      (RANDOM_UUID(), 'Ad26.COV2.S', 'Johnson &amp; Johnson,Janssen'),&#10;                                                      (RANDOM_UUID(), 'NVX-CoV2373', 'Novavax,Nuvaxovid'),&#10;                                                      (RANDOM_UUID(), 'Tetanus Toxoid', 'TTOX,Tetanus'),&#10;                                                      (RANDOM_UUID(), 'Diphtheria Toxoid', 'DT,Diphtheria'),&#10;                                                      (RANDOM_UUID(), 'Pertussis', 'Whooping Cough,Keuchhusten'),&#10;                                                      (RANDOM_UUID(), 'Polio', 'IPV,Kinderlähmung'),&#10;                                                      (RANDOM_UUID(), 'Haemophilus influenzae b', 'Hib,HIB'),&#10;                                                      (RANDOM_UUID(), 'Hepatitis B', 'HepB,HBV'),&#10;                                                      (RANDOM_UUID(), 'Measles', 'Masern,Rubeola'),&#10;                                                      (RANDOM_UUID(), 'Mumps', 'Mumps,Ziegenpeter'),&#10;                                                      (RANDOM_UUID(), 'Rubella', 'Röteln,German Measles'),&#10;                                                      (RANDOM_UUID(), 'Varicella', 'Windpocken,Chickenpox');&#10;&#10;-- Insert vaccine types&#10;INSERT INTO vaccine_type (id, name, code) VALUES&#10;                                              (RANDOM_UUID(), 'COVID-19 mRNA Moderna', 'COVID-MOD'),&#10;                                              (RANDOM_UUID(), 'COVID-19 mRNA Pfizer-BioNTech', 'COVID-PFZ'),&#10;                                              (RANDOM_UUID(), 'COVID-19 Vektor AstraZeneca', 'COVID-AZ'),&#10;                                              (RANDOM_UUID(), 'COVID-19 Vektor Johnson &amp; Johnson', 'COVID-JJ'),&#10;                                              (RANDOM_UUID(), 'COVID-19 Protein Novavax', 'COVID-NVX'),&#10;                                              (RANDOM_UUID(), 'DTPa-IPV-Hib-HepB (6-fach)', 'DTPA-6'),&#10;                                              (RANDOM_UUID(), 'DTPa-IPV (4-fach)', 'DTPA-4'),&#10;                                              (RANDOM_UUID(), 'MMR (Masern-Mumps-Röteln)', 'MMR'),&#10;                                              (RANDOM_UUID(), 'MMRV (MMR + Varizellen)', 'MMRV'),&#10;                                              (RANDOM_UUID(), 'Tetanus-Diphtherie', 'TD'),&#10;                                              (RANDOM_UUID(), 'Varizellen (Windpocken)', 'VAR'),&#10;                                              (RANDOM_UUID(), 'Hepatitis B', 'HEPB');&#10;&#10;-- Insert age categories&#10;INSERT INTO age_category (id, name, age_min_days, age_max_days) VALUES&#10;                                                                    (RANDOM_UUID(), 'Saeuglinge (2-11 Monate)', 60, 335),&#10;                                                                    (RANDOM_UUID(), 'Kleinkinder (1-2 Jahre)', 365, 730),&#10;                                                                    (RANDOM_UUID(), 'Vorschulkinder (3-5 Jahre)', 1095, 1825),&#10;                                                                    (RANDOM_UUID(), 'Schulkinder (6-11 Jahre)', 2190, 4015),&#10;                                                                    (RANDOM_UUID(), 'Jugendliche (12-17 Jahre)', 4380, 6570),&#10;                                                                    (RANDOM_UUID(), 'Junge Erwachsene (18-29 Jahre)', 6570, 10585),&#10;                                                                    (RANDOM_UUID(), 'Erwachsene (30-39 Jahre)', 10950, 14235),&#10;                                                                    (RANDOM_UUID(), 'Erwachsene (40-49 Jahre)', 14600, 17885),&#10;                                                                    (RANDOM_UUID(), 'Erwachsene (50-59 Jahre)', 18250, 21535),&#10;                                                                    (RANDOM_UUID(), 'Erwachsene (60-69 Jahre)', 21900, 25185),&#10;                                                                    (RANDOM_UUID(), 'Senioren (70+ Jahre)', 25550, NULL);&#10;&#10;-- Link vaccine types with active substances&#10;INSERT INTO vaccine_type_active_substance (vaccine_type_id, active_substance_id, qualitative_amount)&#10;SELECT v.id, s.id, '30 μg'&#10;FROM vaccine_type v&#10;         JOIN active_substance s ON v.name = 'COVID-19 mRNA Moderna' AND s.name = 'mRNA-1273'&#10;UNION ALL&#10;SELECT v.id, s.id, '30 μg'&#10;FROM vaccine_type v&#10;         JOIN active_substance s ON v.name = 'COVID-19 mRNA Pfizer-BioNTech' AND s.name = 'BNT162b2'&#10;UNION ALL&#10;SELECT v.id, s.id, '5×10¹⁰ Viruspartikel'&#10;FROM vaccine_type v&#10;         JOIN active_substance s ON v.name = 'COVID-19 Vektor AstraZeneca' AND s.name = 'ChAdOx1-S'&#10;UNION ALL&#10;SELECT v.id, s.id, '5×10¹⁰ Viruspartikel'&#10;FROM vaccine_type v&#10;         JOIN active_substance s ON v.name = 'COVID-19 Vektor Johnson &amp; Johnson' AND s.name = 'Ad26.COV2.S'&#10;UNION ALL&#10;SELECT v.id, s.id, '5 μg'&#10;FROM vaccine_type v&#10;         JOIN active_substance s ON v.name = 'COVID-19 Protein Novavax' AND s.name = 'NVX-CoV2373';&#10;&#10;-- Insert immunization plans for COVID-19 vaccines across different age groups&#10;INSERT INTO immunization_plan (id, name, vaccine_type_id, age_category_id)&#10;SELECT RANDOM_UUID(),&#10;       'COVID-19 Grundimmunisierung - ' || a.name,&#10;       v.id,&#10;       a.id&#10;FROM vaccine_type v,&#10;     age_category a&#10;WHERE v.name IN ('COVID-19 mRNA Moderna', 'COVID-19 mRNA Pfizer-BioNTech')&#10;  AND a.name IN ('Jugendliche (12-17 Jahre)',&#10;                 'Junge Erwachsene (18-29 Jahre)',&#10;                 'Erwachsene (30-39 Jahre)',&#10;                 'Erwachsene (40-49 Jahre)',&#10;                 'Erwachsene (50-59 Jahre)',&#10;                 'Erwachsene (60-69 Jahre)',&#10;                 'Senioren (70+ Jahre)');&#10;&#10;-- Insert immunization plan series for COVID-19 basic immunization&#10;INSERT INTO immunization_plan_series (id, immunization_plan_id, series_name, required_doses)&#10;SELECT RANDOM_UUID(),&#10;       ip.id,&#10;       'Grundimmunisierung',&#10;       2&#10;FROM immunization_plan ip&#10;WHERE ip.name LIKE 'COVID-19 Grundimmunisierung%';&#10;&#10;-- Insert sample immunization plans for childhood vaccines&#10;INSERT INTO immunization_plan (id, name, vaccine_type_id, age_category_id)&#10;SELECT RANDOM_UUID(),&#10;       '6-fach Impfung - ' || a.name,&#10;       v.id,&#10;       a.id&#10;FROM vaccine_type v,&#10;     age_category a&#10;WHERE v.name = 'DTPa-IPV-Hib-HepB (6-fach)'&#10;  AND a.name IN ('Saeuglinge (2-11 Monate)', 'Kleinkinder (1-2 Jahre)')&#10;UNION ALL&#10;SELECT RANDOM_UUID(),&#10;       'MMR Impfung - ' || a.name,&#10;       v.id,&#10;       a.id&#10;FROM vaccine_type v,&#10;     age_category a&#10;WHERE v.name = 'MMR (Masern-Mumps-Röteln)'&#10;  AND a.name IN ('Kleinkinder (1-2 Jahre)', 'Vorschulkinder (3-5 Jahre)');&#10;&#10;-- Insert immunization plan series for childhood vaccines&#10;INSERT INTO immunization_plan_series (id, immunization_plan_id, series_name, required_doses)&#10;SELECT RANDOM_UUID(),&#10;       ip.id,&#10;       CASE&#10;           WHEN ip.name LIKE '6-fach Impfung%' THEN 'Grundimmunisierung 6-fach'&#10;           WHEN ip.name LIKE 'MMR Impfung%' THEN 'MMR Grundimmunisierung'&#10;           END,&#10;       CASE&#10;           WHEN ip.name LIKE '6-fach Impfung%' THEN 3&#10;           WHEN ip.name LIKE 'MMR Impfung%' THEN 2&#10;           END&#10;FROM immunization_plan ip&#10;WHERE ip.name LIKE '6-fach Impfung%' OR ip.name LIKE 'MMR Impfung%';&#10;&#10;-- Insert a sample admin user (password: admin123 - 12 Runden bcrypt)&#10;-- NOTE: column list includes `email` and values are provided in the same order&#10;INSERT INTO users (id, username, email, password_hash, first_name, last_name, birth_date, role) VALUES&#10;    (RANDOM_UUID(), 'admin', 'admin@admin.ch',&#10;     '$2a$12$kLzgXVPlkELs.4p/dYS7n.xzt9C8zUA3EmbFwilJyQa9jyVEtCaiC',&#10;     'System', 'Administrator', DATE '1990-01-01', 'ADMIN');&#10;&#10;-- Insert sample test users (password: user123 - 12 Runden bcrypt)&#10;INSERT INTO users (id, username, email, password_hash, first_name, last_name, birth_date, role) VALUES&#10;    (RANDOM_UUID(), 'john.doe', 'john.doe@example.com',&#10;     '$2a$12$rKOaaufhZ0W6zB0Ic6gqwuvufTLJqZSbgkMKt7EaaKZADTvCR7Rb6',&#10;     'John', 'Doe', DATE '1985-05-15', 'USER'),&#10;    (RANDOM_UUID(), 'jane.smith', 'jane.smith@example.com',&#10;     '$2a$12$rKOaaufhZ0W6zB0Ic6gqwuvufTLJqZSbgkMKt7EaaKZADTvCR7Rb6',&#10;     'Jane', 'Smith', DATE '1992-03-22', 'USER'),&#10;    (RANDOM_UUID(), 'max.mustermann', 'max.mustermann@example.com',&#10;     '$2a$12$rKOaaufhZ0W6zB0Ic6gqwuvufTLJqZSbgkMKt7EaaKZADTvCR7Rb6',&#10;     'Max', 'Mustermann', DATE '1978-11-08', 'USER');&#10;" />
              <option name="updatedContent" value="-- H2-compatible version of V2__Insert_master_data.sql&#10;&#10;CREATE SCHEMA IF NOT EXISTS SPRING_BOOSTERS;&#10;SET SCHEMA SPRING_BOOSTERS;&#10;&#10;-- Insert default active substances&#10;INSERT INTO active_substance (id, name, synonyms) VALUES&#10;                                                      (RANDOM_UUID(), 'mRNA-1273', 'Moderna mRNA,Spikevax'),&#10;                                                      (RANDOM_UUID(), 'BNT162b2', 'Pfizer-BioNTech,Comirnaty'),&#10;                                                      (RANDOM_UUID(), 'ChAdOx1-S', 'AstraZeneca,Vaxzevria'),&#10;                                                      (RANDOM_UUID(), 'Ad26.COV2.S', 'Johnson &amp; Johnson,Janssen'),&#10;                                                      (RANDOM_UUID(), 'NVX-CoV2373', 'Novavax,Nuvaxovid'),&#10;                                                      (RANDOM_UUID(), 'Tetanus Toxoid', 'TTOX,Tetanus'),&#10;                                                      (RANDOM_UUID(), 'Diphtheria Toxoid', 'DT,Diphtheria'),&#10;                                                      (RANDOM_UUID(), 'Pertussis', 'Whooping Cough,Keuchhusten'),&#10;                                                      (RANDOM_UUID(), 'Polio', 'IPV,Kinderlähmung'),&#10;                                                      (RANDOM_UUID(), 'Haemophilus influenzae b', 'Hib,HIB'),&#10;                                                      (RANDOM_UUID(), 'Hepatitis B', 'HepB,HBV'),&#10;                                                      (RANDOM_UUID(), 'Measles', 'Masern,Rubeola'),&#10;                                                      (RANDOM_UUID(), 'Mumps', 'Mumps,Ziegenpeter'),&#10;                                                      (RANDOM_UUID(), 'Rubella', 'Röteln,German Measles'),&#10;                                                      (RANDOM_UUID(), 'Varicella', 'Windpocken,Chickenpox');&#10;&#10;-- Insert vaccine types&#10;INSERT INTO vaccine_type (id, name, code) VALUES&#10;                                              (RANDOM_UUID(), 'COVID-19 mRNA Moderna', 'COVID-MOD'),&#10;                                              (RANDOM_UUID(), 'COVID-19 mRNA Pfizer-BioNTech', 'COVID-PFZ'),&#10;                                              (RANDOM_UUID(), 'COVID-19 Vektor AstraZeneca', 'COVID-AZ'),&#10;                                              (RANDOM_UUID(), 'COVID-19 Vektor Johnson &amp; Johnson', 'COVID-JJ'),&#10;                                              (RANDOM_UUID(), 'COVID-19 Protein Novavax', 'COVID-NVX'),&#10;                                              (RANDOM_UUID(), 'DTPa-IPV-Hib-HepB (6-fach)', 'DTPA-6'),&#10;                                              (RANDOM_UUID(), 'DTPa-IPV (4-fach)', 'DTPA-4'),&#10;                                              (RANDOM_UUID(), 'MMR (Masern-Mumps-Röteln)', 'MMR'),&#10;                                              (RANDOM_UUID(), 'MMRV (MMR + Varizellen)', 'MMRV'),&#10;                                              (RANDOM_UUID(), 'Tetanus-Diphtherie', 'TD'),&#10;                                              (RANDOM_UUID(), 'Varizellen (Windpocken)', 'VAR'),&#10;                                              (RANDOM_UUID(), 'Hepatitis B', 'HEPB');&#10;&#10;-- Insert age categories&#10;INSERT INTO age_category (id, name, age_min_days, age_max_days) VALUES&#10;                                                                    (RANDOM_UUID(), 'Saeuglinge (2-11 Monate)', 60, 335),&#10;                                                                    (RANDOM_UUID(), 'Kleinkinder (1-2 Jahre)', 365, 730),&#10;                                                                    (RANDOM_UUID(), 'Vorschulkinder (3-5 Jahre)', 1095, 1825),&#10;                                                                    (RANDOM_UUID(), 'Schulkinder (6-11 Jahre)', 2190, 4015),&#10;                                                                    (RANDOM_UUID(), 'Jugendliche (12-17 Jahre)', 4380, 6570),&#10;                                                                    (RANDOM_UUID(), 'Junge Erwachsene (18-29 Jahre)', 6570, 10585),&#10;                                                                    (RANDOM_UUID(), 'Erwachsene (30-39 Jahre)', 10950, 14235),&#10;                                                                    (RANDOM_UUID(), 'Erwachsene (40-49 Jahre)', 14600, 17885),&#10;                                                                    (RANDOM_UUID(), 'Erwachsene (50-59 Jahre)', 18250, 21535),&#10;                                                                    (RANDOM_UUID(), 'Erwachsene (60-69 Jahre)', 21900, 25185),&#10;                                                                    (RANDOM_UUID(), 'Senioren (70+ Jahre)', 25550, NULL);&#10;&#10;-- Link vaccine types with active substances&#10;INSERT INTO vaccine_type_active_substance (vaccine_type_id, active_substance_id, qualitative_amount)&#10;SELECT v.id, s.id, '30 μg'&#10;FROM vaccine_type v&#10;         JOIN active_substance s ON v.name = 'COVID-19 mRNA Moderna' AND s.name = 'mRNA-1273'&#10;UNION ALL&#10;SELECT v.id, s.id, '30 μg'&#10;FROM vaccine_type v&#10;         JOIN active_substance s ON v.name = 'COVID-19 mRNA Pfizer-BioNTech' AND s.name = 'BNT162b2'&#10;UNION ALL&#10;SELECT v.id, s.id, '5×10¹⁰ Viruspartikel'&#10;FROM vaccine_type v&#10;         JOIN active_substance s ON v.name = 'COVID-19 Vektor AstraZeneca' AND s.name = 'ChAdOx1-S'&#10;UNION ALL&#10;SELECT v.id, s.id, '5×10¹⁰ Viruspartikel'&#10;FROM vaccine_type v&#10;         JOIN active_substance s ON v.name = 'COVID-19 Vektor Johnson &amp; Johnson' AND s.name = 'Ad26.COV2.S'&#10;UNION ALL&#10;SELECT v.id, s.id, '5 μg'&#10;FROM vaccine_type v&#10;         JOIN active_substance s ON v.name = 'COVID-19 Protein Novavax' AND s.name = 'NVX-CoV2373';&#10;&#10;-- Insert immunization plans for COVID-19 vaccines across different age groups&#10;INSERT INTO immunization_plan (id, name, vaccine_type_id, age_category_id)&#10;SELECT RANDOM_UUID(),&#10;       'COVID-19 Grundimmunisierung - ' || a.name,&#10;       v.id,&#10;       a.id&#10;FROM vaccine_type v,&#10;     age_category a&#10;WHERE v.name IN ('COVID-19 mRNA Moderna', 'COVID-19 mRNA Pfizer-BioNTech')&#10;  AND a.name IN ('Jugendliche (12-17 Jahre)',&#10;                 'Junge Erwachsene (18-29 Jahre)',&#10;                 'Erwachsene (30-39 Jahre)',&#10;                 'Erwachsene (40-49 Jahre)',&#10;                 'Erwachsene (50-59 Jahre)',&#10;                 'Erwachsene (60-69 Jahre)',&#10;                 'Senioren (70+ Jahre)');&#10;&#10;-- Insert immunization plan series for COVID-19 basic immunization&#10;INSERT INTO immunization_plan_series (id, immunization_plan_id, series_name, required_doses)&#10;SELECT RANDOM_UUID(),&#10;       ip.id,&#10;       'Grundimmunisierung',&#10;       2&#10;FROM immunization_plan ip&#10;WHERE ip.name LIKE 'COVID-19 Grundimmunisierung%';&#10;&#10;-- Insert sample immunization plans for childhood vaccines&#10;INSERT INTO immunization_plan (id, name, vaccine_type_id, age_category_id)&#10;SELECT RANDOM_UUID(),&#10;       '6-fach Impfung - ' || a.name,&#10;       v.id,&#10;       a.id&#10;FROM vaccine_type v,&#10;     age_category a&#10;WHERE v.name = 'DTPa-IPV-Hib-HepB (6-fach)'&#10;  AND a.name IN ('Saeuglinge (2-11 Monate)', 'Kleinkinder (1-2 Jahre)')&#10;UNION ALL&#10;SELECT RANDOM_UUID(),&#10;       'MMR Impfung - ' || a.name,&#10;       v.id,&#10;       a.id&#10;FROM vaccine_type v,&#10;     age_category a&#10;WHERE v.name = 'MMR (Masern-Mumps-Röteln)'&#10;  AND a.name IN ('Kleinkinder (1-2 Jahre)', 'Vorschulkinder (3-5 Jahre)');&#10;&#10;-- Insert immunization plan series for childhood vaccines&#10;INSERT INTO immunization_plan_series (id, immunization_plan_id, series_name, required_doses)&#10;SELECT RANDOM_UUID(),&#10;       ip.id,&#10;       CASE&#10;           WHEN ip.name LIKE '6-fach Impfung%' THEN 'Grundimmunisierung 6-fach'&#10;           WHEN ip.name LIKE 'MMR Impfung%' THEN 'MMR Grundimmunisierung'&#10;           END,&#10;       CASE&#10;           WHEN ip.name LIKE '6-fach Impfung%' THEN 3&#10;           WHEN ip.name LIKE 'MMR Impfung%' THEN 2&#10;           END&#10;FROM immunization_plan ip&#10;WHERE ip.name LIKE '6-fach Impfung%' OR ip.name LIKE 'MMR Impfung%';&#10;&#10;-- Insert a sample admin user (password: admin123 - 12 Runden bcrypt)&#10;-- NOTE: column list includes `email` and values are provided in the same order&#10;INSERT INTO users (id, username, email, password_hash, first_name, last_name, birth_date, role) VALUES&#10;    (RANDOM_UUID(), 'admin', 'admin@admin.ch',&#10;     '$2a$12$kLzgXVPlkELs.4p/dYS7n.xzt9C8zUA3EmbFwilJyQa9jyVEtCaiC',&#10;     'System', 'Administrator', DATE '1990-01-01', 'ADMIN');&#10;&#10;-- Insert sample test users (password: user123 - 12 Runden bcrypt)&#10;INSERT INTO users (id, username, email, password_hash, first_name, last_name, birth_date, role) VALUES&#10;    (RANDOM_UUID(), 'john.doe', 'john.doe@example.com',&#10;     '$2a$12$rKOaaufhZ0W6zB0Ic6gqwuvufTLJqZSbgkMKt7EaaKZADTvCR7Rb6',&#10;     'John', 'Doe', DATE '1985-05-15', 'USER'),&#10;    (RANDOM_UUID(), 'jane.smith', 'jane.smith@example.com',&#10;     '$2a$12$rKOaaufhZ0W6zB0Ic6gqwuvufTLJqZSbgkMKt7EaaKZADTvCR7Rb6',&#10;     'Jane', 'Smith', DATE '1992-03-22', 'USER'),&#10;    (RANDOM_UUID(), 'max.mustermann', 'max.mustermann@example.com',&#10;     '$2a$12$rKOaaufhZ0W6zB0Ic6gqwuvufTLJqZSbgkMKt7EaaKZADTvCR7Rb6',&#10;     'Max', 'Mustermann', DATE '1978-11-08', 'USER');&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/core_backend/src/test/resources/db/test-migration/V3__Insert_immunization_records.sql">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/core_backend/src/test/resources/db/test-migration/V3__Insert_immunization_records.sql" />
              <option name="originalContent" value="-- H2-compatible version of V3__Insert_immunization_records.sql&#10;-- Unterschiede zu PostgreSQL:&#10;-- - gen_random_uuid() -&gt; RANDOM_UUID()&#10;-- - keine WITH-CTEs vor INSERT, stattdessen Subselects&#10;-- - 'YYYY-MM-DD'::date -&gt; DATE 'YYYY-MM-DD'&#10;&#10;-- Insert sample immunization records for existing users&#10;-- This script adds various vaccination records to demonstrate the system functionality&#10;&#10;------------------------------------------------------------&#10;-- COVID-19 vaccinations for john.doe (Moderna, age 40-49)&#10;------------------------------------------------------------&#10;CREATE SCHEMA IF NOT EXISTS SPRING_BOOSTERS;&#10;SET SCHEMA SPRING_BOOSTERS;&#10;&#10;INSERT INTO immunization_record (id, user_id, vaccine_type_id, immunization_plan_id, administered_on, dose_order_claimed)&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'john.doe'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'COVID-19 mRNA Moderna'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Moderna'&#10;          AND ac.name = 'Erwachsene (40-49 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2021-06-15',&#10;    1&#10;&#10;UNION ALL&#10;&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'john.doe'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'COVID-19 mRNA Moderna'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Moderna'&#10;          AND ac.name = 'Erwachsene (40-49 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2021-07-20',&#10;    2&#10;&#10;UNION ALL&#10;&#10;-- Booster shot&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'john.doe'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'COVID-19 mRNA Moderna'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Moderna'&#10;          AND ac.name = 'Erwachsene (40-49 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2022-01-10',&#10;    3;&#10;&#10;&#10;------------------------------------------------------------&#10;-- COVID-19 vaccinations for jane.smith (Pfizer, age 30-39)&#10;------------------------------------------------------------&#10;INSERT INTO immunization_record (id, user_id, vaccine_type_id, immunization_plan_id, administered_on, dose_order_claimed)&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'jane.smith'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'COVID-19 mRNA Pfizer-BioNTech'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Pfizer-BioNTech'&#10;          AND ac.name = 'Erwachsene (30-39 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2021-05-10',&#10;    1&#10;&#10;UNION ALL&#10;&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'jane.smith'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'COVID-19 mRNA Pfizer-BioNTech'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Pfizer-BioNTech'&#10;          AND ac.name = 'Erwachsene (30-39 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2021-06-14',&#10;    2&#10;&#10;UNION ALL&#10;&#10;-- Booster shot&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'jane.smith'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'COVID-19 mRNA Pfizer-BioNTech'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Pfizer-BioNTech'&#10;          AND ac.name = 'Erwachsene (30-39 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2021-12-20',&#10;    3;&#10;&#10;&#10;------------------------------------------------------------&#10;-- COVID-19 vaccinations for max.mustermann&#10;-- 1: AstraZeneca, 2+3: Pfizer, Plan: Pfizer 40-49&#10;------------------------------------------------------------&#10;INSERT INTO immunization_record (id, user_id, vaccine_type_id, immunization_plan_id, administered_on, dose_order_claimed)&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'max.mustermann'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'COVID-19 Vektor AstraZeneca'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Pfizer-BioNTech'&#10;          AND ac.name = 'Erwachsene (40-49 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2021-04-20',&#10;    1&#10;&#10;UNION ALL&#10;&#10;-- Second dose (mixed vaccination) using same plan&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'max.mustermann'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'COVID-19 mRNA Pfizer-BioNTech'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Pfizer-BioNTech'&#10;          AND ac.name = 'Erwachsene (40-49 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2021-06-25',&#10;    2&#10;&#10;UNION ALL&#10;&#10;-- Booster shot&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'max.mustermann'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'COVID-19 mRNA Pfizer-BioNTech'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Pfizer-BioNTech'&#10;          AND ac.name = 'Erwachsene (40-49 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2022-02-15',&#10;    3;&#10;&#10;&#10;------------------------------------------------------------&#10;-- Childhood MMR vaccinations for jane.smith&#10;------------------------------------------------------------&#10;INSERT INTO immunization_record (id, user_id, vaccine_type_id, immunization_plan_id, administered_on, dose_order_claimed)&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'jane.smith'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'MMR (Masern-Mumps-Röteln)'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;        WHERE vt.name = 'MMR (Masern-Mumps-Röteln)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '1993-05-22',  -- At age ~1 year&#10;    1&#10;&#10;UNION ALL&#10;&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'jane.smith'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'MMR (Masern-Mumps-Röteln)'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;        WHERE vt.name = 'MMR (Masern-Mumps-Röteln)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '1996-03-22',  -- At age ~4 years&#10;    2;&#10;&#10;&#10;------------------------------------------------------------&#10;-- 6-fach vaccinations for max.mustermann&#10;------------------------------------------------------------&#10;INSERT INTO immunization_record (id, user_id, vaccine_type_id, immunization_plan_id, administered_on, dose_order_claimed)&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'max.mustermann'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'DTPa-IPV-Hib-HepB (6-fach)'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;        WHERE vt.name = 'DTPa-IPV-Hib-HepB (6-fach)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '1979-01-08',  -- At age ~2 months&#10;    1&#10;&#10;UNION ALL&#10;&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'max.mustermann'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'DTPa-IPV-Hib-HepB (6-fach)'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;        WHERE vt.name = 'DTPa-IPV-Hib-HepB (6-fach)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '1979-03-08',  -- At age ~4 months&#10;    2&#10;&#10;UNION ALL&#10;&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'max.mustermann'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'DTPa-IPV-Hib-HepB (6-fach)'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;        WHERE vt.name = 'DTPa-IPV-Hib-HepB (6-fach)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '1979-05-08',  -- At age ~6 months&#10;    3;&#10;&#10;&#10;------------------------------------------------------------&#10;-- Hepatitis B vaccinations for john.doe&#10;-- using COVID-19 Moderna 40-49 plan as base&#10;------------------------------------------------------------&#10;INSERT INTO immunization_record (id, user_id, vaccine_type_id, immunization_plan_id, administered_on, dose_order_claimed)&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'john.doe'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'Hepatitis B'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Moderna'&#10;          AND ac.name = 'Erwachsene (40-49 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2020-03-15',&#10;    1&#10;&#10;UNION ALL&#10;&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'john.doe'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'Hepatitis B'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Moderna'&#10;          AND ac.name = 'Erwachsene (40-49 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2020-04-15',&#10;    2&#10;&#10;UNION ALL&#10;&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'john.doe'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'Hepatitis B'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Moderna'&#10;          AND ac.name = 'Erwachsene (40-49 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2020-10-15',&#10;    3;" />
              <option name="updatedContent" value="-- H2-compatible version of V3__Insert_immunization_records.sql&#10;-- Unterschiede zu PostgreSQL:&#10;-- - gen_random_uuid() -&gt; RANDOM_UUID()&#10;-- - keine WITH-CTEs vor INSERT, stattdessen Subselects&#10;-- - 'YYYY-MM-DD'::date -&gt; DATE 'YYYY-MM-DD'&#10;&#10;-- Insert sample immunization records for existing users&#10;-- This script adds various vaccination records to demonstrate the system functionality&#10;&#10;------------------------------------------------------------&#10;-- COVID-19 vaccinations for john.doe (Moderna, age 40-49)&#10;------------------------------------------------------------&#10;CREATE SCHEMA IF NOT EXISTS SPRING_BOOSTERS;&#10;SET SCHEMA SPRING_BOOSTERS;&#10;&#10;INSERT INTO immunization_record (id, user_id, vaccine_type_id, immunization_plan_id, administered_on, dose_order_claimed)&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'john.doe'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'COVID-19 mRNA Moderna'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Moderna'&#10;          AND ac.name = 'Erwachsene (40-49 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2021-06-15',&#10;    1&#10;&#10;UNION ALL&#10;&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'john.doe'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'COVID-19 mRNA Moderna'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Moderna'&#10;          AND ac.name = 'Erwachsene (40-49 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2021-07-20',&#10;    2&#10;&#10;UNION ALL&#10;&#10;-- Booster shot&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'john.doe'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'COVID-19 mRNA Moderna'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Moderna'&#10;          AND ac.name = 'Erwachsene (40-49 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2022-01-10',&#10;    3;&#10;&#10;&#10;------------------------------------------------------------&#10;-- COVID-19 vaccinations for jane.smith (Pfizer, age 30-39)&#10;------------------------------------------------------------&#10;INSERT INTO immunization_record (id, user_id, vaccine_type_id, immunization_plan_id, administered_on, dose_order_claimed)&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'jane.smith'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'COVID-19 mRNA Pfizer-BioNTech'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Pfizer-BioNTech'&#10;          AND ac.name = 'Erwachsene (30-39 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2021-05-10',&#10;    1&#10;&#10;UNION ALL&#10;&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'jane.smith'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'COVID-19 mRNA Pfizer-BioNTech'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Pfizer-BioNTech'&#10;          AND ac.name = 'Erwachsene (30-39 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2021-06-14',&#10;    2&#10;&#10;UNION ALL&#10;&#10;-- Booster shot&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'jane.smith'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'COVID-19 mRNA Pfizer-BioNTech'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Pfizer-BioNTech'&#10;          AND ac.name = 'Erwachsene (30-39 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2021-12-20',&#10;    3;&#10;&#10;&#10;------------------------------------------------------------&#10;-- COVID-19 vaccinations for max.mustermann&#10;-- 1: AstraZeneca, 2+3: Pfizer, Plan: Pfizer 40-49&#10;------------------------------------------------------------&#10;INSERT INTO immunization_record (id, user_id, vaccine_type_id, immunization_plan_id, administered_on, dose_order_claimed)&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'max.mustermann'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'COVID-19 Vektor AstraZeneca'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Pfizer-BioNTech'&#10;          AND ac.name = 'Erwachsene (40-49 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2021-04-20',&#10;    1&#10;&#10;UNION ALL&#10;&#10;-- Second dose (mixed vaccination) using same plan&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'max.mustermann'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'COVID-19 mRNA Pfizer-BioNTech'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Pfizer-BioNTech'&#10;          AND ac.name = 'Erwachsene (40-49 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2021-06-25',&#10;    2&#10;&#10;UNION ALL&#10;&#10;-- Booster shot&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'max.mustermann'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'COVID-19 mRNA Pfizer-BioNTech'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Pfizer-BioNTech'&#10;          AND ac.name = 'Erwachsene (40-49 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2022-02-15',&#10;    3;&#10;&#10;&#10;------------------------------------------------------------&#10;-- Childhood MMR vaccinations for jane.smith&#10;------------------------------------------------------------&#10;INSERT INTO immunization_record (id, user_id, vaccine_type_id, immunization_plan_id, administered_on, dose_order_claimed)&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'jane.smith'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'MMR (Masern-Mumps-Röteln)'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;        WHERE vt.name = 'MMR (Masern-Mumps-Röteln)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '1993-05-22',  -- At age ~1 year&#10;    1&#10;&#10;UNION ALL&#10;&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'jane.smith'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'MMR (Masern-Mumps-Röteln)'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;        WHERE vt.name = 'MMR (Masern-Mumps-Röteln)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '1996-03-22',  -- At age ~4 years&#10;    2;&#10;&#10;&#10;------------------------------------------------------------&#10;-- 6-fach vaccinations for max.mustermann&#10;------------------------------------------------------------&#10;INSERT INTO immunization_record (id, user_id, vaccine_type_id, immunization_plan_id, administered_on, dose_order_claimed)&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'max.mustermann'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'DTPa-IPV-Hib-HepB (6-fach)'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;        WHERE vt.name = 'DTPa-IPV-Hib-HepB (6-fach)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '1979-01-08',  -- At age ~2 months&#10;    1&#10;&#10;UNION ALL&#10;&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'max.mustermann'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'DTPa-IPV-Hib-HepB (6-fach)'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;        WHERE vt.name = 'DTPa-IPV-Hib-HepB (6-fach)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '1979-03-08',  -- At age ~4 months&#10;    2&#10;&#10;UNION ALL&#10;&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'max.mustermann'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'DTPa-IPV-Hib-HepB (6-fach)'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;        WHERE vt.name = 'DTPa-IPV-Hib-HepB (6-fach)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '1979-05-08',  -- At age ~6 months&#10;    3;&#10;&#10;&#10;------------------------------------------------------------&#10;-- Hepatitis B vaccinations for john.doe&#10;-- using COVID-19 Moderna 40-49 plan as base&#10;------------------------------------------------------------&#10;INSERT INTO immunization_record (id, user_id, vaccine_type_id, immunization_plan_id, administered_on, dose_order_claimed)&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'john.doe'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'Hepatitis B'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Moderna'&#10;          AND ac.name = 'Erwachsene (40-49 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2020-03-15',&#10;    1&#10;&#10;UNION ALL&#10;&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'john.doe'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'Hepatitis B'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Moderna'&#10;          AND ac.name = 'Erwachsene (40-49 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2020-04-15',&#10;    2&#10;&#10;UNION ALL&#10;&#10;SELECT&#10;    RANDOM_UUID(),&#10;    (SELECT id FROM users WHERE username = 'john.doe'),&#10;    (SELECT id FROM vaccine_type WHERE name = 'Hepatitis B'),&#10;    (&#10;        SELECT ip.id&#10;        FROM immunization_plan ip&#10;                 JOIN vaccine_type vt ON ip.vaccine_type_id = vt.id&#10;                 JOIN age_category ac ON ip.age_category_id = ac.id&#10;        WHERE vt.name = 'COVID-19 mRNA Moderna'&#10;          AND ac.name = 'Erwachsene (40-49 Jahre)'&#10;        LIMIT 1&#10;    ),&#10;    DATE '2020-10-15',&#10;    3;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>